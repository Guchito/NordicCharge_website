---
import BaseHead from '@/components/BaseHead.astro';
import CategoryBadge from '@/components/elements/category-badge';
import Footer from '@/components/layout/footer';
import Navbar from '@/components/layout/navbar';

const { title, description, currentPage, frontmatter } = Astro.props;

// Format the date if it exists
const formattedDate = frontmatter?.date
  ? new Date(frontmatter.date).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })
  : null;

// Use frontmatter title if available, otherwise fall back to title prop
const pageTitle = frontmatter?.title || title;
---

<html lang="en">
  <head>
    <BaseHead title={title} description={description} />
  </head>
  <body class={`h-screen antialiased`}>
    <Navbar currentPage={currentPage} client:load />
    <main>
      <section class="container mx-auto max-w-4xl px-4 py-16 md:py-28 lg:py-32">
        <article class="space-y-6 md:space-y-8">
          {/* Header with date and title */}
          <div class="flex flex-col items-center justify-center gap-4">
            {
              formattedDate && (
                <a href="/" class="group">
                  <CategoryBadge label={formattedDate} />
                </a>
              )
            }
            <h1 class="text-center text-2xl md:text-4xl lg:text-5xl">
              {pageTitle}
            </h1>
          </div>

          {/* Article content */}
          <div
            class="prose prose-2xl prose-headings:text-2xl max-w-none leading-8"
          >
            <slot />
          </div>
        </article>
      </section>
    </main>
    <Footer />
  </body>
</html>
